workspace:
  base: /go
  path: src/github.com/appleboy/easyssh-proxy

pipeline:
  clone:
    image: plugins/git
    tags: true

  test:
    image: appleboy/golang-testing
    pull: true
    environment:
      TAGS: netgo
      GOPATH: /go
    commands:
      - make vet
      - make lint
      - make embedmd
      - make ssh-server
      - coverage all
      - make coverage

    when:
      event: [ push, tag, pull_request ]
